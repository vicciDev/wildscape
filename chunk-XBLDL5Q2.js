import{a as re,b as le}from"./chunk-OPHNN3TD.js";import{a as oe}from"./chunk-2LCKBUCN.js";import{B as $,K as ee,L as te,M as ie,Q as ne,a as K,r as Q,s as X,y as Z}from"./chunk-JSV5RXAE.js";import{a as E}from"./chunk-OPR332P5.js";import{Ab as B,Bb as H,D as l,Eb as U,K as t,Kb as Y,L as n,M as d,Oa as c,Ob as W,Pa as L,Q as g,Qa as F,Ra as S,Sa as w,Ta as I,Ua as M,Ub as J,Va as k,Wa as P,Y as o,_ as y,db as x,ea as b,fb as O,h as m,jb as T,ka as v,kb as V,mb as R,qb as A,ra as _,rb as N,s as u,sa as C,sb as z,tb as j,v as r,wb as G,xb as q,y as h,yb as D}from"./chunk-L5ICFIAI.js";import"./chunk-PYEIH4SJ.js";import"./chunk-G5LKHTWO.js";import"./chunk-PPHRO4QI.js";import"./chunk-4PGTP63H.js";import"./chunk-CX2FLORO.js";import"./chunk-HC6MZPB3.js";import"./chunk-MZ3KW5SR.js";import"./chunk-FERD25SW.js";import"./chunk-SYQESB6R.js";import"./chunk-LEIMCQKJ.js";import"./chunk-MM5QLNJM.js";import"./chunk-72KDLSWN.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-Z7R4G3KQ.js";import"./chunk-MCRJI3T3.js";import"./chunk-LDG2K7AA.js";import"./chunk-3JNI7XCC.js";import"./chunk-WTZKA22V.js";import"./chunk-Y7WTXGDI.js";import"./chunk-CL74ATLT.js";import"./chunk-F7XBNY6P.js";import"./chunk-GFSEGY4N.js";import"./chunk-5MDSDW7X.js";import"./chunk-X3FQ5PAQ.js";import"./chunk-LTIPSBNC.js";import"./chunk-JWIEPCRG.js";import"./chunk-LF5XB4YN.js";import"./chunk-RW4GY4BD.js";var Le=(()=>{let p=class p{signUp(){throw new Error("Method not implemented.")}constructor(){this.loading=u(!1),this.emailLogin=u(!1),this.fb=m(M),this.toastCtrl=m(le),this.hide=u(!0),this.api=m(oe),this.auth=m(E),this.router=m(_),this.validateField=m(re),this.initForm(),K({personCircle:ie,person:ee,eyeOff:X,eye:Q,logInSharp:Z,refreshCircle:ne,personAdd:te,logoGoogle:$})}ngOnInit(){}initForm(){this.logForm=this.fb.group({username:["",c.required],password:["",[c.required,c.minLength(8)]],rememberMe:[!1]}),b(()=>{let a=this.emailLogin(),i=this.logForm.get("username");i&&(a?i.setValidators([c.required,c.email]):i.setValidators([c.required]),i.updateValueAndValidity())})}altLogin(){this.emailLogin.update(a=>!a)}altPwdVisibility(){this.hide.update(a=>!a)}login(){if(this.logForm.invalid)return;this.loading.set(!0);let a=this.logForm.value;this.api.login(a).subscribe({next:i=>{this.auth.setToken(i.access_token,this.logForm.value.rememberMe),this.toastCtrl.toast({message:"Logged in successfully!",duration:2e3,position:"bottom",color:"success"}),this.router.navigate(["/dashboard"])},error:i=>{var e;this.toastCtrl.toast({message:((e=i.error)==null?void 0:e.detail)||"Login Failed",duration:5e3,position:"bottom",color:"danger"}),this.loading.set(!1)},complete:()=>{this.loading.set(!1)}})}reset(){this.logForm.reset(),this.loading.set(!1)}};p.\u0275fac=function(i){return new(i||p)},p.\u0275cmp=h({type:p,selectors:[["app-login"]],decls:44,vars:15,consts:[["id","main-content",3,"fullscreen"],[1,"ion-justify-content-center","ion-align-items-center","login-container"],["size-md","8","size-lg","6"],[1,"ion-justify-content-evenly","ion-padding-horizontal"],["color","primary",1,"login-title"],["fill","clear",3,"click"],[3,"name"],[3,"ngSubmit","formGroup"],[1,"ion-padding"],["formControlName","username","label-placement","floating",3,"label","type","placeholder","errorText"],["slot","end",3,"name","color"],["label","Password","formControlName","password","placeholder","Enter your password","label-placement","floating",3,"type","errorText"],["fill","clear","slot","end","type","button",3,"click"],[1,"ion-margin","ion-justify-content-evenly"],["color","primary","slot","start","fill","clear","shape","round","type","submit",3,"disabled"],["slot","end","name","log-in-sharp"],["color","primary","slot","end","shape","round","fill","clear","type","Reset",3,"click","disabled"],["slot","start","name","refresh-circle"],[1,"ion-padding","checkbox-wrapper"],["lines","none",1,"checkbox-input-item"],["slot","start","formControlName","rememberMe"],[1,"ion-text-wrap","login-links"],["id","forgotPass",1,"forgotPas","ion-text-center","ion-margin"],["routerLink","/auth/faq"],["routerLink","/auth/signup"],["lines","none",1,"section-title-wrap","ion-text-center"],[1,"section-title"]],template:function(i,e){if(i&1&&(t(0,"ion-content",0)(1,"ion-row",1)(2,"ion-col",2)(3,"ion-row",3)(4,"ion-title",4),o(5,"Login"),n(),t(6,"ion-button",5),g("click",function(){return e.altLogin()}),d(7,"ion-icon",6),n()(),t(8,"section")(9,"ion-card-content")(10,"form",7),g("ngSubmit",function(){return e.login()}),t(11,"div",8)(12,"ion-input",9),d(13,"ion-icon",10),n()(),t(14,"div",8)(15,"ion-input",11)(16,"ion-button",12),g("click",function(){return e.altPwdVisibility()}),d(17,"ion-icon",6),n()()(),t(18,"ion-buttons",13)(19,"ion-button",14),d(20,"ion-icon",15),o(21),n(),t(22,"ion-button",16),g("click",function(){return e.logForm.reset()}),d(23,"ion-icon",17),o(24," Reset "),n()(),t(25,"div",18)(26,"ion-item",19),d(27,"ion-checkbox",20),t(28,"ion-label"),o(29,"Remember Me"),n()()()(),t(30,"ion-label",21)(31,"p",22),o(32,"Forgot Password"),n(),t(33,"p"),o(34,"Issues with Login? "),t(35,"a",23),o(36,"Get Help"),n()(),t(37,"p"),o(38,"Don't have an account? "),t(39,"a",24),o(40,"Sign up"),n()()(),t(41,"ion-list",25)(42,"ion-chip",26),o(43,"OR"),n()()()()()()()),i&2){let s;l("fullscreen",!0),r(7),l("name",e.emailLogin()?"mail":"person-circle"),r(3),l("formGroup",e.logForm),r(2),l("label",e.emailLogin()?"Email Address":"Username")("type",e.emailLogin()?"email":"text")("placeholder",e.emailLogin()?"Enter your email":"Enter your username")("errorText",e.emailLogin()?"Enter a proper email address":"Enter a proper username"),r(),l("name",e.emailLogin()?"mail":"person")("color",(s=e.logForm.get("email"))!=null&&s.invalid&&((s=e.logForm.get("email"))!=null&&s.touched)?"danger":"primary"),r(2),l("type",e.hide()?"password":"text")("errorText",e.validateField.getErrorMessage(e.logForm.get("password"))),r(2),l("name",e.hide()?"eye-off":"eye"),r(2),l("disabled",!e.logForm.valid),r(2),y(" ",e.loading()?"Logging You In":"Login"," "),r(),l("disabled",e.logForm.pristine)}},dependencies:[v,k,S,L,F,J,T,V,R,A,N,z,j,G,q,D,B,H,U,Y,x,O,W,P,w,I,C],styles:[".login-container[_ngcontent-%COMP%]{min-width:500px;margin:0 auto;padding:1.5rem;transform:translateY(20%)}.login-card-header[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row;align-items:center;justify-content:space-between}.login-card-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:xx-large}.login-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;margin-bottom:1rem}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.login-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin-top:1rem;gap:1rem}.login-links[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem}.login-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-size:.875rem;text-decoration:none;margin-left:.25rem}ion-icon[_ngcontent-%COMP%]{font-size:1.6rem}"]});let f=p;return f})();export{Le as LoginPage};
