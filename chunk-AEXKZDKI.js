import{a as q}from"./chunk-2OTGHO4I.js";import{Ab as V,B as p,D as c,E as C,Eb as X,Fb as j,Gb as N,Hb as $,K as i,L as a,Lb as D,M as m,Mb as G,N as S,O as I,Q as v,R as M,Ub as U,Va as k,Y as g,Z as d,_ as P,eb as E,h as f,ha as O,ia as x,ka as w,kb as B,lb as L,mb as F,pa as z,pb as T,s as h,sb as W,t as y,tb as H,u as _,ub as A,v as r,vb as R,y as b}from"./chunk-L5ICFIAI.js";import"./chunk-PYEIH4SJ.js";import"./chunk-G5LKHTWO.js";import"./chunk-PPHRO4QI.js";import"./chunk-4PGTP63H.js";import"./chunk-CX2FLORO.js";import"./chunk-HC6MZPB3.js";import"./chunk-MZ3KW5SR.js";import"./chunk-FERD25SW.js";import"./chunk-SYQESB6R.js";import"./chunk-LEIMCQKJ.js";import"./chunk-MM5QLNJM.js";import"./chunk-72KDLSWN.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-Z7R4G3KQ.js";import"./chunk-MCRJI3T3.js";import"./chunk-LDG2K7AA.js";import"./chunk-3JNI7XCC.js";import"./chunk-WTZKA22V.js";import"./chunk-Y7WTXGDI.js";import"./chunk-CL74ATLT.js";import"./chunk-F7XBNY6P.js";import"./chunk-GFSEGY4N.js";import"./chunk-5MDSDW7X.js";import"./chunk-X3FQ5PAQ.js";import"./chunk-LTIPSBNC.js";import"./chunk-JWIEPCRG.js";import"./chunk-LF5XB4YN.js";import"./chunk-RW4GY4BD.js";function K(o,s){if(o&1&&(i(0,"ion-segment-button",16)(1,"ion-label"),g(2),a()()),o&2){let l=s.$implicit;c("value",l.value),r(2),d(l.label)}}function Q(o,s){if(o&1&&(i(0,"ion-col",18)(1,"ion-card",19)(2,"ion-row",20)(3,"ion-card-title"),g(4),a(),i(5,"ion-buttons"),g(6," lll "),a()(),i(7,"div",21),m(8,"img",22),a(),i(9,"ion-card-content",23),g(10),a()()()),o&2){let l=s.$implicit;r(4),d(l.title),r(4),c("src",l.image,y)("alt",l.title),r(2),P(" ",l.description," ")}}function Y(o,s){if(o&1&&(S(0),p(1,Q,11,4,"ion-col",17),I()),o&2){let l=M();r(),c("ngForOf",l.filteredItems)}}function Z(o,s){o&1&&(i(0,"ion-col",24),m(1,"ion-spinner",25),i(2,"p"),g(3,"Loading items..."),a()())}var me=(()=>{let s=class s{constructor(){this.segment_value=h("all"),this.filteredItems=[],this.isLoading=h(!1),this.screenWidth=window.innerWidth,this.route=f(z),this.categoryService=f(q)}ngOnInit(){let e=this.route.snapshot.paramMap.get("slug");if(e&&this.categoryService.getCategoryBySlug(e).subscribe(t=>{this.category=t,this.category&&this.filterItems(this.segment_value())}),!this.category){console.error("No related activities");return}this.filterItems(this.segment_value()),this.updateVisibleSegments()}getBackgroundStyle(){var e;return`url(${(e=this.category)==null?void 0:e.image}) center center / cover no-repeat`}changeSegment(e){this.segment_value.set(e.detail.value),this.filterItems(this.segment_value())}filterItems(e){this.category&&(this.isLoading.set(!0),this.categoryService.getItemsByCategoryAndSegment(this.category.category,e).subscribe({next:t=>{this.filteredItems=t,this.isLoading.set(!1)},error:t=>{console.error("Error loading items",t),this.isLoading.set(!1)}}))}onResize(e){this.screenWidth=e.target.innerWidth,this.updateVisibleSegments()}updateVisibleSegments(){var e,t,n;this.screenWidth>768?this.visibleSegments=(e=this.category)==null?void 0:e.segments:this.screenWidth>480?this.visibleSegments=(t=this.category)==null?void 0:t.segments.slice(0,3):this.visibleSegments=(n=this.category)==null?void 0:n.segments.slice(0,2)}};s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=b({type:s,selectors:[["app-category"]],hostBindings:function(t,n){t&1&&v("resize",function(u){return n.onResize(u)},!1,_)},decls:24,vars:9,consts:[["id","main-content",3,"fullscreen"],["slot","fixed",1,"ion-no-border","backButton"],["slot","start"],["color","dark","defaultHref","/home"],[1,"main"],[1,"site-title"],[1,"site-background"],["src","../../../assets/wildScape.png","alt","WildScape"],[1,"segments","ion-padding-top"],["mode","ios",3,"ionChange","value"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[1,"scrillable-container"],[1,"ion-align-items-center","ion-justify-content-evenly"],[4,"ngIf"],["class","ion-text-center ion-padding",4,"ngIf"],[3,"value"],["sizeMd","4","sizeLg","4","sizeSm","6","sizeXs","12","sizeXl","3","class","ion-no-padding",4,"ngFor","ngForOf"],["sizeMd","4","sizeLg","4","sizeSm","6","sizeXs","12","sizeXl","3",1,"ion-no-padding"],[1,"ion-no-padding"],[1,"top","ion-justify-content-evenly","ion-no-margin"],[1,"image-wrapper"],["loading","lazy",3,"src","alt"],[1,"overlay"],[1,"ion-text-center","ion-padding"],["name","crescent"]],template:function(t,n){t&1&&(i(0,"ion-content",0)(1,"ion-header",1)(2,"ion-toolbar")(3,"ion-buttons",2),m(4,"ion-back-button",3),a()()(),i(5,"main",4)(6,"section",5)(7,"div",6),m(8,"img",7),i(9,"h1"),g(10),a(),i(11,"p"),g(12),a()()(),i(13,"ion-row",8)(14,"ion-segment",9),v("ionChange",function(u){return n.changeSegment(u)}),i(15,"ion-segment-button",10)(16,"ion-label"),g(17,"All"),a()(),p(18,K,3,2,"ion-segment-button",11),a()(),i(19,"div",12)(20,"ion-grid")(21,"ion-row",13),p(22,Y,2,1,"ng-container",14)(23,Z,4,0,"ion-col",15),a()()()()()),t&2&&(c("fullscreen",!0),r(6),C("background",n.getBackgroundStyle()),r(4),d(n.category==null?null:n.category.category),r(2),d(n.category==null?null:n.category.description),r(2),c("value",n.segment_value()),r(4),c("ngForOf",n.visibleSegments),r(4),c("ngIf",!n.isLoading()),r(),c("ngIf",n.isLoading()))},dependencies:[U,B,L,F,T,W,H,A,R,V,X,j,N,$,D,E,G,w,O,x,k],styles:["ion-row[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{margin:0 .4rem;--background: #fff;--border-color: transparent;--indicator-color: var(--gradient-primary);--color: var(--ion-color-primary);--color-checked: var(--ion-color-light);--border-radius: 1rem}ion-row[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:.8rem;font-weight:500}ion-row[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]:hover{--background: var(--ion-color-primary-tint);--color: var(--ion-color-dark-shade)}.main[_ngcontent-%COMP%]{background:var(--gradient-overlay)}ion-card[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{position:absolute;top:0;width:100%;background:var(--ion-color-secondary-contrast);padding:.5rem 0;transition:background-color .2s;z-index:1}ion-card[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;bottom:0;padding:.5rem;width:100%;background:var(--ion-color-light);box-shadow:0 4px 8px var(--ion-color-secondary-contrast);opacity:0;transition:opacity .2s;border-radius:.5rem}ion-card[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:1}ion-card[_ngcontent-%COMP%]:hover   .image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.site-background[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:auto;filter:drop-shadow(0 4px 6px rgba(0,0,0,.3))}.site-background[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;text-transform:capitalize;letter-spacing:.2rem}"]});let o=s;return o})();export{me as CategoryPage};
